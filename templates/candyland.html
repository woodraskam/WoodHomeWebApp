<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{{.Title}}</title>

        <!-- CandyLand Game Styles -->
        <link rel="stylesheet" href="/static/games/CandyLand/src/css/styles.css">
        <link rel="stylesheet" href="/static/games/CandyLand/src/css/animations.css">
        <link rel="stylesheet" href="/static/games/CandyLand/src/css/responsive.css">

        <!-- Navigation back to main site -->
        <style>
            .nav-back {
                position: fixed;
                top: 20px;
                left: 20px;
                z-index: 1000;
                background: rgba(255, 255, 255, 0.9);
                padding: 10px 20px;
                border-radius: 25px;
                text-decoration: none;
                color: #333;
                font-weight: bold;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
                transition: all 0.3s ease;
            }

            .nav-back:hover {
                background: rgba(255, 255, 255, 1);
                transform: scale(1.05);
                text-decoration: none;
                color: #333;
            }
        </style>
    </head>

    <body>
        <!-- Navigation back to main site -->
        <a href="/" class="nav-back">← Back to Dashboard</a>

        <!-- Floating candy particles -->
        <div class="floating-candy" style="top: 5%; left: 10%; animation-delay: 0s;">🍭</div>
        <div class="floating-candy" style="top: 15%; left: 85%; animation-delay: 1s;">🍬</div>
        <div class="floating-candy" style="top: 25%; left: 5%; animation-delay: 2s;">🍫</div>
        <div class="floating-candy" style="top: 35%; left: 90%; animation-delay: 3s;">🍪</div>
        <div class="floating-candy" style="top: 45%; left: 15%; animation-delay: 4s;">🍩</div>
        <div class="floating-candy" style="top: 55%; left: 80%; animation-delay: 5s;">🧁</div>
        <div class="floating-candy" style="top: 65%; left: 10%; animation-delay: 0.5s;">🍰</div>
        <div class="floating-candy" style="top: 75%; left: 85%; animation-delay: 1.5s;">🎂</div>
        <div class="floating-candy" style="top: 85%; left: 20%; animation-delay: 2.5s;">🍯</div>
        <div class="floating-candy" style="top: 95%; left: 75%; animation-delay: 3.5s;">🍊</div>

        <div id="game-container">
            <h1 class="game-title">🍭 Candyland Adventure 🍭</h1>

            <!-- Start Screen -->
            <div id="start-screen" class="start-screen">
                <h2 class="welcome-title">Welcome to the Magical Candy Kingdom!</h2>
                <div class="player-selector">
                    <p class="player-count">How many brave candy explorers?</p>
                    <div class="player-buttons">
                        <button class="player-btn" onclick="selectPlayers(1)" data-players="1">1 Player (vs AI)</button>
                        <button class="player-btn" onclick="selectPlayers(2)" data-players="2">2 Players</button>
                        <button class="player-btn" onclick="selectPlayers(3)" data-players="3">3 Players</button>
                        <button class="player-btn" onclick="selectPlayers(4)" data-players="4">4 Players</button>
                    </div>
                </div>
                <button id="start-game-btn" class="start-btn" onclick="startGame()" disabled>🎮 START MAGICAL ADVENTURE
                    🎮</button>
            </div>

            <!-- Game Board -->
            <div id="game-board" class="game-board">
                <!-- Master Progress Timeline - Full Width Top -->
                <div class="master-scorecard">
                    <div class="progress-timeline" id="progress-timeline">
                        <!-- Timeline segments will be generated by JavaScript -->
                    </div>
                </div>

                <div class="game-content">
                    <!-- Left Control Panel -->
                    <div class="left-control-panel">
                        <!-- Removed redundant headers - turn info is in swim lane -->

                        <div class="card-display">
                            <div class="drawn-card" id="drawn-card">🎴</div>
                            <div class="card-text" id="card-text">Press SPACEBAR to spin!</div>
                        </div>

                        <div class="control-buttons">
                            <button class="btn btn-primary" id="main-action-btn" onclick="handleMainAction()">🎡 Spin
                                the Wheel!</button>
                        </div>
                    </div>

                    <!-- Right Game Area - Forest Walking Lanes -->
                    <div class="right-game-area">
                        <div class="swim-lanes-container" id="swim-lanes-container">
                            <!-- Forest lanes will be generated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Player Score Row -->
                <div class="player-score-row" id="player-score-row">
                    <!-- Player score cards will be generated by JavaScript -->
                </div>
            </div>

            <!-- Victory Screen -->
            <div id="victory-screen" class="victory-screen">
                <canvas id="confetti-canvas"></canvas>
                <div class="victory-content">
                    <div class="victory-player-avatar" id="victory-player-avatar">
                        <!-- Player avatar will be inserted here -->
                    </div>
                    <h2 class="victory-title" id="victory-title">🎉 MAGICAL VICTORY! 🎉</h2>
                    <p id="victory-message" class="victory-message"></p>
                    <button class="start-btn" onclick="newGame()">🎮 Another Magical Adventure 🎮</button>
                </div>
            </div>

            <!-- Card Overlay -->
            <div id="card-overlay" class="card-overlay">
                <div class="card-overlay-content">
                    <div class="spinning-card" id="spinning-card">
                        <div class="card-icon" id="card-icon">🎲</div>
                        <div class="card-text" id="card-text"></div>
                    </div>
                    <div class="card-instructions">Press SPACEBAR to draw!</div>
                </div>
            </div>
        </div>

        <!-- Game Scripts -->
        <script src="/static/games/CandyLand/src/js/confetti.min.js"></script>
        <script src="/static/games/CandyLand/src/js/gameState.js"></script>
        <script src="/static/games/CandyLand/src/js/gameBoard.js"></script>
        <script src="/static/games/CandyLand/src/js/gameLogic.js"></script>
        <script src="/static/games/CandyLand/src/js/animations.js"></script>
        <script src="/static/games/CandyLand/src/js/soundEffects.js"></script>
        <script src="/static/games/CandyLand/src/js/main.js"></script>
    </body>

</html>